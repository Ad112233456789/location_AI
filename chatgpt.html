<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>دردشة ذكية بأسلوب واتساب</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSRiByIu-lrVNFhhpiJFLWnmFucQiBP8beJ4g&usqp=CAU');
        background-size: cover;
        font-family: sans-serif;
        
      }
      .chat-icon-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        font-size: 28px;
        z-index: 101;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .chat-box {
        display: none;
        flex-direction: column;
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: 300px;
        height: 450px;
        background-color: #ece5dd;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        z-index: 100;
        overflow: hidden;
      }

      .chat-header {
        background-color: #075e54;
        color: #fff;
        padding: 10px;
        display: flex;
        align-items: center;
        border-radius: 8px 8px 0 0;
      }

      .chat-profile {
        display: flex;
        align-items: center;
        flex-direction: row;
      }

      .imges {
        width: 40px;
        height: 40px;
        border-radius: 50%;
      }

      .chat-name {
        font-weight: bold;
        font-size: 16px;
        text-align: right;
      }

      .chat-content {
        flex: 1;
        padding: 10px;
        overflow-y: auto;
        background-color: #ece5dd;
      }

      .chat-input {
        display: flex;
        background: #f0f0f0;
        padding: 10px;
        border-top: 1px solid #ccc;
      }

      .chat-input input {
        flex: 1;
        padding: 10px;
        border-radius: 20px;
        border: 1px solid #ccc;
        outline: none;
        font-size: 14px;
      }

      .chat-input button {
        margin-left: 10px;
        padding: 10px 20px;
        border: none;
        border-radius: 20px;
        background: #075e54;
        color: #fff;
        cursor: pointer;
        font-size: 14px;
      }

      .message {
        display: inline-block;
        padding: 10px 15px;
        margin: 5px 0;
        max-width: 70%;
        font-size: 14px;
        line-height: 1.4;
        clear: both;
        border-radius: 8px;
      }

      .user-msg {
        float: right;
        background-color: #dcf8c6;
        border-radius: 8px 0 8px 8px;
        text-align: left;
      }

      .ai-msg {
        float: left;
        background-color: #fff;
        border-radius: 0 8px 8px 8px;
        text-align: left;
      }

      .message-read {
        position: relative;
        display: inline-block;
      }

      .message-read::after {
        content: "✓✓";
        position: absolute;
        bottom: 5px;
        right: 10px;
        color: #34b7f1;
        font-size: 12px;
        font-weight: bold;
      }

      .button-container {
        display: flex;
        gap: 1px;
        justify-content: flex-end;
        padding: 10px;
      }

      .button-submit,
      .button1 {
        width: auto;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-size: 15px;
        margin: 2px;
        cursor: pointer;
      }

      .button-submit {
        background-color: #194591;
        color: #ffffff;
        border: 2px solid #a6badd;
      }

      .button1 {
        background-color: #ff0000;
        color: #ffffff;
        border: 2px solid #a6badd;
      }

      .password-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
      }

      .password-modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        background: #74C7BE;
        border:1px solid #0028FF;
        text-align: center;
      }

      .password-modal input {
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
        border: 1px solid #ccc;
      }

      .password-modal button {
        padding: 9px 20px;
        background-color: #075e54;
        color: white;
        border: none;
        border-radius: 5px;
      }
      .AI-Logo{
        width: 50px;
        height:50pc;
        height: 50px;
        border-radius: 50px;
        border: 1px solid #020C8F;
      }
    </style>
  </head>
  <body>
    <div class="button-container">
<a href="#" onclick="checkPassword(); return false;">
  <button class="button-submit">صفحة خاصة بصاحب الموقع فقط</button>
</a>

      <a href="register.html">
        <button class="button1">تسجيل الخروج</button>
      </a>
    </div>

    <!-- نافذة إدخال كلمة المرور -->
    <div class="password-modal" id="password-modal">
      <div class="password-modal-content">
        <img src="https://vid.alarabiya.net/images/2023/05/22/98f0ef9a-2540-4280-a1e0-509e3d26890e/98f0ef9a-2540-4280-a1e0-509e3d26890e_16x9_1200x676.jpg?width=555&format=jpg" alt="imges" class="AI-Logo">
        <h3>رقم التصريح الخاص بك</h3>
        <input type="password" id="password-input" placeholder="ادخل رقم التصريح ">
        <button onclick="verifyPassword()">إدخال</button>
      </div>
    </div>

    <div class="chat-icon-button" id="chat-toggle-btn" onclick="toggleChat()">💬</div>
    <div class="chat-box" id="chat-box">
      <div class="chat-header">
        <div class="chat-profile">
          <img src="https://media.licdn.com/dms/image/v2/D4D12AQGwII967WGXSg/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1689056893250?e=2147483647&v=beta&t=Uk3-clWucygMOi3NIzg-Z-5xd-8pCOfKN7co1Q5tSnw" class="imges" alt="صورة الملف الشخصي">
          <span class="chat-name">muhsen mousa Thichi</span>
        </div>
      </div>
      <div class="chat-content" id="chat-content">
        <div class="message ai-msg">كيف يمكنني مساعدتك اليوم؟</div>
      </div>
      <div class="chat-input">
        <input type="text" id="user-input" placeholder="اكتب رسالتك...">
        <button onclick="sendMessage()">إرسال</button>
      </div>
    </div>

    <script>
      const apiKey = "AIzaSyBjn1KWg_3kUZr_4M1Qsdd4KvGSFm9IXyk";
      const badWords = ['انت زنوة', 'انت ديوث', 'انت خنيث', 'انت منيوك', 'انيكك', 'سكس', 'ابغى اشوف سكس', 'ابغا انيكك', 'يازنوة','الله يلعنك'];
      let warningGiven = false;

      function toggleChat() {
        const chatBox = document.getElementById("chat-box");
        const chatBtn = document.getElementById("chat-toggle-btn");
        
        if (chatBox.style.display === "none" || chatBox.style.display === "") {
          chatBox.style.display = "flex";
          chatBtn.textContent = "❌";
        } else {
          chatBox.style.display = "none";
          chatBtn.textContent = "💬";
        }
      }

    function checkPassword() {
  document.getElementById("password-modal").style.display = "flex";
}

function verifyPassword() {
  const passwordInput = document.getElementById("password-input").value;
  const correctPassword = "MT20052011"; // كلمة المرور الجديدة
  
  if (passwordInput === correctPassword) {
    window.location.href = "Data.html"; // الانتقال للصفحة إذا كانت كلمة المرور صحيحة
  } else {
    alert("رقم التصريح غير صحيح");
    alert("تنبيه اذا لم تكن صاحب الموقع وقمت بعمل اي من التقنيات لفتح هاذا الزر سيتم تحويلك الى قضية اختراق وتقوم النيابة العامة باتخاذ الاجرات النظامية بحقك(يوجد داخل هاذي الصفحة معلومات خاصة بصاحب الموقع والمستخدمين فقط)");
  }
}

 

      async function sendMessage() {
        const inputField = document.getElementById("user-input");
        const userInput = inputField.value.trim();
        if (!userInput) return;
        
        if (containsBadWords(userInput)) {
          handleBadWords();
          inputField.value = "";
          return;
        }
        
        addMessage(userInput, "user");
        inputField.value = "";
        
        try {
          const response = await fetch(
            `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`,
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                contents: [{ parts: [{ text: userInput }] }],
              }),
            }
          );
          
          const data = await response.json();
          const aiResponse = data?.candidates?.[0]?.content?.parts?.[0]?.text || "لم أفهم سؤالك، حاول مرة أخرى.";
          
          addMessage(aiResponse, "ai");
        } catch (error) {
          addMessage("تعذر الاتصال بالذكاء الاصطناعي. تحقق من اتصالك بالإنترنت.", "ai");
          console.error("AI Error:", error);
        }
      }

      function addMessage(text, sender) {
        const chatContent = document.getElementById("chat-content");
        const messageDiv = document.createElement("div");
        messageDiv.classList.add("message", sender === "user" ? "user-msg" : "ai-msg");
        
        if (sender === "ai") {
          messageDiv.classList.add("message-read");
        }
        
        messageDiv.textContent = text.replace(/\*/g, "");
        chatContent.appendChild(messageDiv);
        chatContent.scrollTop = chatContent.scrollHeight;
      }

      function containsBadWords(text) {
        return badWords.some(word => text.includes(word));
      }

      function handleBadWords() {
        const warningMessage = warningGiven ?
          "⚠️ لقد تم حظرك مؤقتًا..." :
          "❌ تحذير: تم الاحتفاظ بنسخة من محادثاتك كإنذار أول...";
        
        addMessage(warningMessage, "ai");
        warningGiven = true;
      }
    </script>
  </body>
</html>